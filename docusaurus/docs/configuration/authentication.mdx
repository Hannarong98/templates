---
title: AAD Authentication
---

The example code is set up to use authentication. For this to work, an App Registration has to be set up in Azure AD.  
If you'd like to do this step later, you can remove the `forced` prop provided to `MsalBrowserProvider`.

### UI

Head over to [Azure -> Azure Active Directory -> App registrations](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps)
with your Intility Account, and create a new registration.

![New Registration in Azure](/img/azure-new.png)

Select a fitting name for your project, this name will be presented to the user during consent.

Under `Supported account types`, choose either `Intility AS only - Single tenant` or `Any Azure AD directory - Multitenant`.
This can be changed later, so if you're unsure what to choose, select single tenant.

Under `Redirect URI`, select `Single-page application (SPA)` from the dropdown, and enter `http://localhost:3000`.

Hit the register button, and you will be taken to an overview of your newly created registration.

![Finding Client ID](/img/azure-clientid.png)

Copy the `Application (Client) ID` GUID, and paste it into the `clientId` field in your `index.tsx` file.

```jsx title="src/index.tsx"
const msal = {
  auth: {
    clientId: "YOUR_CLIENT_ID",
    ...
  },
  ...
};
```

You have now successfully set up authentication, and are able to run `npm start` locally.

### Adding reply URLs

For each deployment of your app, you'll need to register it. You can do that by going to the Authentication page.

![Adding Reply URLs](/img/azure-replyurls.png)

The first we need to add is the URL the deploy step makes in OpenShift:

```
https://{your-project-slug}.openshift-inside.intility.no
```

You can also add more later if you create more environments.

## CLI

Login with the Azure CLI and run the following command (rember to modify the displayName)

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs
  groupId="shell"
  defaultValue="bash"
  values={[
  {
    label: "bash",
    value: "bash"
  }, {
    label: "PowerShell",
    value: "ps"
  }
  ]}
>
<TabItem value="bash">

```bash
az rest -u https://graph.microsoft.com/v1.0/applications -m post -b '{"displayName":"MyApp","spa":{"redirectUris":["http://localhost:3000"]}}'
```

</TabItem>
<TabItem value="ps">

```ps
az rest -u https://graph.microsoft.com/v1.0/applications -m post -b '{\"displayName\":\"MyApp\",\"spa\":{\"redirectUris\":[\"http://localhost:3000\"]}}'
```

</TabItem>
</Tabs>

Copy the `appId` GUID, and paste it into the `clientId` field in your `index.tsx` file.

```jsx title="src/index.tsx"
const msal = {
  auth: {
    clientId: "YOUR_CLIENT_ID",
    ...
  },
  ...
};
```

You have now successfully set up authentication, and are able to run `npm start` locally.
